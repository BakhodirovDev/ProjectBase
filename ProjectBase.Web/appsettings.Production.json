{
  "Kestrel": {
    "Endpoints": {
      "Http": {
        "Url": "${API_URL:-http://0.0.0.0:5000}"
      }
    }
  },
  "ConnectionStrings": {
    "DefaultConnection": "Host=${POSTGRES_HOST:-postgres};Port=${POSTGRES_PORT:-5432};Database=${POSTGRES_DB:-projectbase};Username=${POSTGRES_USER:-postgres};Password=${POSTGRES_PASSWORD}",
    "Redis": "${REDIS_HOST:-redis}:${REDIS_PORT:-6379},abortConnect=false${REDIS_PASSWORD:+,password=${REDIS_PASSWORD}}"
  },
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "JwtSettings": {
    "SecretKey": "${JWT_SECRET_KEY}",
    "RefreshTokenSecretKey": "${JWT_REFRESH_TOKEN_SECRET_KEY}",
    "Issuer": "${JWT_ISSUER:-api.projectbase.com}",
    "Audience": "${JWT_AUDIENCE:-api.projectbase.com}",
    "ExpirationMinutes": "${JWT_EXPIRES_MINUTES:-60}",
    "RefreshTokenExpiresInDays": "${JWT_REFRESH_EXPIRES_DAYS:-7}"
  },
  "RateLimiter": {
    "GlobalLimiter": {
      "PermitLimit": "${RATE_LIMIT:-100}",
      "WindowInMinutes": "${RATE_WINDOW:-1}",
      "QueueLimit": "${RATE_QUEUE_LIMIT:-10}"
    }
  },
  "SwaggerSettings": {
    "Enabled": "${SWAGGER_ENABLED:-true}",
    "Title": "${SWAGGER_TITLE:-ProjectBase API}",
    "Version": "${SWAGGER_VERSION:-v1}",
    "Description": "${SWAGGER_DESCRIPTION:-ProjectBase Web API Documentation}",
    "RoutePrefix": "${SWAGGER_ROUTE_PREFIX:-swagger}",
    "ContactName": "${SWAGGER_CONTACT_NAME:-Your Name}",
    "ContactEmail": "${SWAGGER_CONTACT_EMAIL:-your.email@example.com}",
    "ContactUrl": "${SWAGGER_CONTACT_URL:-https://example.uz}",
    "ProductionUrl": "${SWAGGER_PRODUCTION_URL:-}",
    "StagingUrl": "${SWAGGER_STAGING_URL:-}",
    "AllowedSwaggerIPs": "${SWAGGER_ALLOWED_IPS:-127.0.0.1,::1}"
  },
  "Serilog": {
    "Using": [ "Serilog.Sinks.Console", "Serilog.Sinks.File" ],
    "MinimumLevel": {
      "Default": "Information",
      "Override": {
        "Microsoft": "Warning",
        "Microsoft.AspNetCore": "Warning",
        "System": "Warning"
      }
    },
    "WriteTo": [
      {
        "Name": "Console"
      },
      {
        "Name": "File",
        "Args": {
          "path": "${SERILOG_FILE_PATH:-logs/log-.txt}",
          "rollingInterval": "${SERILOG_FILE_ROLLING_INTERVAL:-Day}",
          "retainedFileCountLimit": "${SERILOG_FILE_RETAINED_LIMIT:-30}"
        }
      }
    ],
    "Enrich": [ "FromLogContext" ]
  },
  "CorsSettings": {
    "Policies": {
      "ProductionPolicy": {
        "AllowedOrigins": "${CORS_PRODUCTION_ORIGINS:-https://example.uz,https://www.example.uz,https://admin.example.uz}",
        "AllowedMethods": "${CORS_PRODUCTION_METHODS:-GET,POST,PUT,DELETE,PATCH}",
        "AllowedHeaders": "${CORS_PRODUCTION_HEADERS:-Content-Type,Authorization}",
        "ExposedHeaders": "${CORS_PRODUCTION_EXPOSED_HEADERS:-Content-Disposition,X-Pagination}",
        "AllowCredentials": "${CORS_PRODUCTION_ALLOW_CREDENTIALS:-true}",
        "AllowAnyOrigin": "${CORS_PRODUCTION_ALLOW_ANY_ORIGIN:-false}"
      },
      "DevelopmentPolicy": {
        "AllowedOrigins": "${CORS_DEVELOPMENT_ORIGINS:-}",
        "AllowedMethods": "${CORS_DEVELOPMENT_METHODS:-}",
        "AllowedHeaders": "${CORS_DEVELOPMENT_HEADERS:-}",
        "ExposedHeaders": "${CORS_DEVELOPMENT_EXPOSED_HEADERS:-Content-Disposition,X-Pagination}",
        "AllowCredentials": "${CORS_DEVELOPMENT_ALLOW_CREDENTIALS:-false}",
        "AllowAnyOrigin": "${CORS_DEVELOPMENT_ALLOW_ANY_ORIGIN:-true}"
      },
      "LocalhostPolicy": {
        "AllowedOrigins": "${CORS_LOCALHOST_ORIGINS:-http://localhost:3000,http://localhost:5000,http://localhost:5173,http://127.0.0.1:3000,http://127.0.0.1:5000,http://127.0.0.1:5173}",
        "AllowedMethods": "${CORS_LOCALHOST_METHODS:-}",
        "AllowedHeaders": "${CORS_LOCALHOST_HEADERS:-}",
        "ExposedHeaders": "${CORS_LOCALHOST_EXPOSED_HEADERS:-Content-Disposition,X-Pagination}",
        "AllowCredentials": "${CORS_LOCALHOST_ALLOW_CREDENTIALS:-true}",
        "AllowAnyOrigin": "${CORS_LOCALHOST_ALLOW_ANY_ORIGIN:-false}"
      }
    }
  }
}
